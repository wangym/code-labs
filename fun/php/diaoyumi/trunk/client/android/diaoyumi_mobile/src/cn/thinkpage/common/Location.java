package cn.thinkpage.common;

import java.util.ArrayList;

import com.diaoyumi.android.etc.Util;


public class Location {
	private static Location instance = null;
	private String cityData = "101010100,北京,Beijing,39.55,116.24;101020100,上海,Shangha,31.14,121.29;101030100,天津,Tianjin,29.38,111.52;101040100,重庆,Chongqing,29.35,106.33;101320101,香港,HongKong,21.23,115.12;101330101,澳门,Macau,21.33,115.07;101090101,石家庄,Shijiazhuang,38.02,114.30;101090401,承德,Chengde,40.59,117.57;101090301,张家口,Zhangjiakou,40.48,114.53;101091101,秦皇岛,Qinhuangdao,39.55,119.35;101090501,唐山,Tangshan,39.36,118.11;101090601,廊坊,Langfang,116.7,39.53;101090201,保定,Baoding,38.51,115.30;101090701,沧州,Cangzhou,38.18,116.52;101090801,衡水,Hengshu,37.44,115.42;101090901,邢台,Xingta,37.04,114.30;101091001,邯郸,Handan,36.36,114.28;101100101,太原,Taiyuan,37.54,112.33;101100201,大同,Datong,40.06,113.17;101100301,阳泉,Yangquan,37.51,113.34;101100501,长治,Changzh,36.11,113.06;101100601,晋城,Jincheng,35.30,112.51;101100901,朔州,Shuozhou,39.19,112.26;101100401,晋中,Jinzhong,0,0;101100801,运城,Yuncheng,35.02,110.59;101101001,忻州,Xinzhou,38.24,112.43;101100701,临汾,Linfen,36.05,111.31;101101100,吕梁,Lvliang,0,0;101101101,离石,Lish,0,0;101100402,榆次,Yuc,37.41,112.43;101080101,呼和浩特,Huhehaote,40.48,111.41;101080201,包头,Baotou,40.39,109.49;101081000,呼伦贝尔,Hulunbeier,0,0;101081101,乌兰浩特,Wulanhaote,46.03,122.03;101080501,通辽,Tongliao,43.37,122.16;101080601,赤峰,Chifeng,42.17,118.58;101080901,锡林浩特,Xilinhaote,43.57,116.03;101080401,集宁,Jining,41.02,113.06;101080701,鄂尔多斯,Eerduos,0,0;101080801,临河,Linhe,40.46,107.22;101080301,乌海,Wuha,39.40,106.48;101081201,阿拉善左旗,Alashanzuoq,0,0;101070101,沈阳,Shenyang,41.48,123.25;101070201,大连,Dalian,38.55,121.36;101070301,鞍山,Anshan,41.07,123.00;101070401,抚顺,Fushun,41.51,123.54;101070501,本溪,Benx,41.18,123.46;101070601,丹东,Dandong,40.08,124.22;101070701,锦州,Jinzhou,41.07,121.09;101070801,营口,Yingkou,40.39,122.13;101070901,阜新,Fuxin,42.01,121.39;101071001,辽阳,Liaoyang,41.16,123.12;101071101,铁岭,Tieling,42.18,123.51;101071201,朝阳,Chaoyang,41.34,120.27;101071301,盘锦,Panjin,41.07,122.03;101071401,葫芦岛,Huludao,40.45,120.51;101060101,长春,Changchun,43.54,125.19;101060201,吉林,Jilin,43.52,126.33;101060401,四平,Siping,43.10,124.22;101060701,辽源,Liaoyuan,42.54,125.09;101060501,通化,Tonghua,41.43,125.56;101060901,白山,Baishan,41.56,126.26;101060801,松原,Songyuan,45.11,124.49;101060601,白城,Baicheng,45.38,122.50;101060301,延吉,Yanj,42.54,129.30;101050101,哈尔滨,Haerbin,45.44,126.36;101050201,齐齐哈尔,Qiqihaer,47.20,123.57;101050301,牡丹江,Mudanjiang,44.35,129.36;101050401,佳木斯,Jiamus,46.47,130.22;101050901,大庆,Daqing,46.36,125.01;101051101,鸡西,Jix,45.17,130.57;101051301,双鸭山,Shuangyashan,46.38,131.11;101050801,伊春,Yichun,47.42,128.56;101051002,七台河,Qitaihe,45.48,130.49;101051201,鹤岗,Hegang,47.20,130.16;101050601,黑河,Heihe,50.14,127.29;101050501,绥化,Suihua,46.38,126.59;101050701,大兴安岭,Daxinganling,0,0;101190101,南京,Nanjing,32.03,118.46;101190201,无锡,Wux,31.34,120.18;101190801,徐州,Xuzhou,34.15,117.11;101191101,常州,Changzhou,31.47,119.58;101190401,苏州,Suzhou,31.19,120.37;101190501,南通,Nantong,32.01,120.51;101191001,连云港,Lianyungang,0,0;101190901,淮安,Huaian,33.30,119.09;101190701,盐城,Yancheng,0,0;101190601,扬州,Yangzhou,32.23,119.26;101190301,镇江,Zhenjiang,32.11,119.27;101191201,泰州,Taizhou,32.30,119.54;101191301,宿迁,Suqian,33.58,118.18;101190403,张家港,Zhangjiagang,31.52,120.32;101210101,杭州,Hangzhou,30.16,120.10;101210401,宁波,Ningbo,29.52,121.33;101210701,温州,Wenzhou,28.01,120.39;101210301,嘉兴,Jiaxing,30.46,120.45;101210201,湖州,Huzhou,30.52,120.06;101210501,绍兴,Shaoxing,30.00,120.34;101210503,上虞,Shangyu,30.01,120.52;101210901,金华,Jinhua,29.07,119.39;101210904,义乌,Yiwu,29.18,120.04;101211001,衢州,Quzhou,28.58,118.52;101211101,舟山,Zhoushan,30.01,122.06;101210601,台州,Taizhou,28.41,121.27;101210801,丽水,Lishu,28.27,119.54;101210802,遂昌,Suichang,0,0;101210403,慈溪,Cix,30.11,121.15;101210103,桐庐,Tonglu,0,0;101210607,温岭,Wenling,28.22,121.21;101220101,合肥,Hefe,31.52,117.17;101220901,亳州,Bozhou,33.52,115.47;101221201,淮北,Huaibe,33.57,116.47;101220701,宿州,Suzhou,33.38,116.58;101220801,阜阳,Fuyang,32.54,115.48;101220201,蚌埠,Bengbu,32.56,117.21;101220401,淮南,Huainan,32.37,116.58;101221101,滁州,Chuzhou,32.18,118.18;101221501,六安,Luan,31.44,116.28;101221601,巢湖,Chaohu,31.36,117.52;101220301,芜湖,Wuhu,31.19,118.22;101220501,马鞍山,Maanshan,31.43,118.28;101220601,安庆,Anqing,30.31,117.02;101221701,池州,Chizhou,0,0;101221301,铜陵,Tongling,30.56,117.48;101221401,宣城,Xuancheng,0,0;101221001,黄山,Huangshan,29.43,118.18;101221008,黄山景区,HuangshanMt.,0,0;101230101,福州,Fuzhou,26.05,119.18;101230201,厦门,Xiamen,24.27,118.06;101230401,莆田,Putian,24.26,119.01;101230801,三明,Sanming,26.13,117.36;101230501,泉州,Quanzhou,24.56,118.36;101230601,漳州,Zhangzhou,24.31,117.39;101230901,南平,Nanping,26.38,118.10;101230905,武夷山,Wuyishan,27.46,118.02;101230701,龙岩,Longyan,25.06,117.01;101230301,宁德,Ningde,26.39,119.31;101230308,福鼎,Fuding,0,0;101240101,南昌,Nanchang,28.40,115.55;101240201,九江,Jiujiang,29.43,115.58;101240801,景德镇,Jingdezhen,29.17,117.13;101240901,萍乡,Pingxiang,27.37,113.50;101241001,新余,Xinyu,27.48,114.56;101241101,鹰潭,Yingtan,28.14,117.03;101240701,赣州,Ganzhou,28.52,114.56;101240501,宜春,Yichun,27.47,114.23;101240301,上饶,Shangrao,25.27,117.58;101240601,吉安,Jian,27.07,114.58;101240608,井冈山,Jinggangshan,26.34,114.10;101240401,抚州,Fuzhou,0,0;101120101,济南,Jinan,36.40,117.00;101120201,青岛,Qingdao,36.03,120.18;101120301,淄博,Zibo,36.48,118.03;101121401,枣庄,Zaozhuang,34.52,117.33;101121201,东营,Dongying,37.27,118.30;101120501,烟台,Yanta,37.32,121.24;101120601,潍坊,Weifang,36.43,119.06;101120603,寿光,Shouguang,36.53,118.44;101120609,诸城,Zhucheng,35.59,119.24;101120701,济宁,Jining,35.23,116.33;101120711,邹城,Zoucheng,35.24,116.58;101120801,泰安,Taian,36.11,117.08;101120802,新泰,Xinta,35.54,117.45;101121301,威海,Weiha,37.31,122.07;101121501,日照,Rizhao,35.23,119.32;101121601,莱芜,Laiwu,36.12,117.40;101120901,临沂,Liny,35.03,118.20;101120401,德州,Dezhou,37.26,116.17;101121701,聊城,Liaocheng,36.26,115.57;101121101,滨州,Binzhou,37.22,118.02;101121001,菏泽,Heze,35.14,115.26;101120106,济阳,Jiyang,0,0;101120208,平度,Pingdu,36.47,119.58;101180101,郑州,Zhengzhou,34.46,113.40;101180801,开封,Kaifeng,34.47,114.21;101180901,洛阳,Luoyang,34.41,112.27;101180502,平顶山,Pingdingshan,33.44,113.17;101180201,安阳,Anyang,36.06,114.21;101181101,焦作,Jiaozuo,35.14,113.12;101181201,鹤壁,Heb,35.54,114.11;101180301,新乡,Xinxiang,35.18,113.52;101181301,濮阳,Puyang,35.44,115.01;101180401,许昌,Xuchang,34.01,113.49;101181501,漯河,Luohe,33.33,114.02;101181701,三门峡,Sanmenxia,34.47,111.12;101180701,南阳,Nanyang,33.00,112.32;101181001,商丘,Shangqiu,34.26,115.38;101180601,信阳,Xinyang,32.07,114.04;101181401,周口,Zhoukou,33.37,114.38;101181601,驻马店,Zhumadian,32.58,114.01;101181801,济源,Jiyuan,35.04,112.35;101181009,永城,Yongcheng,0,0;101200101,武汉,Wuhan,30.35,114.17;101200601,黄石,Huangsh,30.12,115.06;101200201,襄樊,Xiangfan,32.02,112.08;101200801,荆州,Jingzhou,0,0;101200901,宜昌,Yichang,30.42,111.17;101200501,黄冈,Huanggang,0,0;101200301,鄂州,Ezhou,30.23,114.52;101201101,十堰,Shiyan,32.40,110.47;101200401,孝感,Xiaogan,30.56,113.54;101201401,荆门,Jingmen,31.02,112.12;101200701,咸宁,Xianning,29.53,114.17;101201301,随州,Suizhou,31.42,113.22;101201001,恩施,Ensh,30.16,109.29;101201501,天门,Tianmen,60.39,113.10;101201601,仙桃,Xiantao,30.22,113.27;101200405,应城,Yingcheng,30.57,113.33;101250101,长沙,Changsha,28.12,112.59;101250301,株洲,Zhuzhou,27.51,113.09;101250201,湘潭,Xiangtan,27.52,112.53;101250401,衡阳,Hengyang,26.53,112.37;101250409,南岳,Nanyue,0,0;101250901,邵阳,Shaoyang,27.14,111.28;101251001,岳阳,Yueyang,29.22,113.06;101250601,常德,Changde,29.02,111.51;101251101,张家界,Zhangjiajie,29.08,110.29;101250700,益阳,Yiyang,28.36,112.20;101250501,郴州,Chenzhou,25.46,113.02;101251401,永州,Yongzhou,26.13,111.37;101251201,怀化,Huaihua,27.33,109.58;101250801,娄底,Loud,27.44,111.59;101251501,吉首,Jishou,28.18,109.43;101251301,黔阳,Qianyang,0,0;101280101,广州,Guangzhou,23.08,113.14;101280601,深圳,Shenzhen,22.33,114.07;101280701,珠海,Zhuha,22.17,113.34;101280501,汕头,Shantou,23.22,116.41;101280800,佛山,Foshan,23.02,113.06;101280201,韶关,Shaoguan,24.48,113.37;101281201,河源,Heyuan,23.43,114.41;101280401,梅州,Meizhou,24.19,116.07;101280301,惠州,Huizhou,23.05,114.22;101282101,汕尾,Shanwe,22.47,115.21;101281601,东莞,Dongguan,23.02,113.45;101281701,中山,Zhongshan,22.31,113.22;101281101,江门,Jiangmen,22.35,113.04;101281103,开平,Kaiping,22.22,112.40;101281801,阳江,Yangjiang,21.50,111.58;101281001,湛江,Zhangjiang,21.11,110.24;101282001,茂名,Maoming,21.40,110.53;101280901,肇庆,Zhaoqing,23.03,112.27;101281301,清远,Qingyuan,23.42,113.01;101281501,潮州,Chaozhou,23.40,116.38;101281901,揭阳,Jieyang,22.32,116.21;101281401,云浮,Yunfu,22.57,112.02;101300101,南宁,Nanning,22.48,108.19;101300301,柳州,Liuzhou,23.19,109.24;101300501,桂林,Guilin,25.17,110.17;101300601,梧州,Wuzhou,23.29,111.20;101301301,北海,Beiha,21.28,109.07;101301401,防城港,Fangchenggang,21.37,108.20;101301101,钦州,Qinzhou,21.57,108.37;101300801,贵港,Guigang,23.06,109.36;101300901,玉林,Yulin,22.38,110.09;101301001,百色,Baise,23.54,106.36;101300701,贺州,Hezhou,0,0;101301201,河池,Hech,24.42,108.03;101300401,来宾,Laibin,0,0;101300201,崇左,Chongzuo,0,0;101310101,海口,Haikou,20.02,110.20;101310201,三亚,Sanya,18.14,109.31;101310211,琼海,Qiongha,19.14,110.28;101310204,澄迈,Chengma,0,0;101310214,保亭,Baoting,0,0;101310203,临高,Lingao,0,0;101310210,屯昌,Tunchang,0,0;101310216,陵水,Lingshu,0,0;101310207,白沙,Baisha,0,0;101310222,五指山,Wuzhishan,0,0;101310221,乐东,Ledong,0,0;101310209,定安,Dingan,0,0;101310202,东方,Dongfang,0,0;101310206,昌江,Changjiang,0,0;101310205,儋州,Danzhou,19.31,109.34;101310215,万宁,Wanning,0,0;101310212,文昌,Wenchang,0,0;101310208,琼中,Qiongzhong,0,0;101310217,西沙,Xisha,0,0;101310220,南沙,Nansha,0,0;101270101,成都,Chengdu,30.40,104.04;101270301,自贡,Zigong,29.23,104.46;101270201,攀枝花,Panzhihua,26.34,101.43;101271001,泸州,Luzhou,28.54,105.24;101272001,德阳,Deyang,31.09,104.22;101270401,绵阳,Mianyang,31.30,104.42;101272101,广元,Guangyuan,32.28,105.51;101270701,遂宁,Suining,30.31,105.33;101271201,内江,Neijiang,29.36,105.02;101271401,乐山,Leshan,29.36,103.44;101270501,南充,Nanchong,30.49,106.04;101271101,宜宾,Yibin,28.47,104.34;101270801,广安,Guangan,0,0;101270601,达州,Dazhou,0,0;101270901,巴中,Bazhong,31.51,106.43;101271701,雅安,Yaan,29.59,102.59;101271501,眉山,Meishan,0,0;101271301,资阳,Ziyang,30.09,104.38;101271304,简阳,Jianyang,30.24,104.32;101271901,阿坝,Aba,0,0;101271906,九寨沟,Jiuzhaigou,0,0;101271801,甘孜,Ganz,0,0;101271601,凉山,Liangshan,0,0;101271409,峨眉山,Emeishan,29.36,103.29;101043400,酉阳,Youyang,0,0;101260101,贵阳,Guiyang,26.35,106.42;101260801,六盘水,Liupanshu,26.35,104.50;101260201,遵义,Zuny,27.42,106.55;101260301,安顺,Anshun,26.14,105.55;101260601,铜仁,Tongren,27.43,109.12;101260701,毕节,Bijie,27.18,105.18;101260902,晴隆,Qinglong,0,0;101260401,都匀,Duyun,26.15,107.31;101260501,凯里,Kail,26.35,107.58;101260515,锦屏,Jinping,0,0;101260901,兴义,Xingy,25.05,104.53;101290101,昆明,Kunming,25.04,102.42;101290401,曲靖,Qujing,25.30,103.48;101290701,玉溪,Yux,24.22,102.32;101291001,昭通,Zhaotong,27.20,103.42;101290801,楚雄,Chuxiong,25.01,101.32;101290301,红河,Honghe,0,0;101291401,丽江,Lijiang,0,0;101291601,西双版纳,SipsongPanna,0,0;101291301,香格里拉,Xianggelila,0,0;101290601,文山,Wenshan,0,0;101290201,大理,Dal,25.34,100.13;101290501,保山,Baoshan,25.08,99.10;101291101,临沧,Lincang,0,0;101290901,普洱,Puer,0,0;101291004,镇雄,Zhenxiong,0,0;101140101,拉萨,Lhasa,29.39,91.08;101140201,日喀则,ShiGaTse,29.16,88.51;101140601,那曲,Naqu,0,0;101110101,西安,Xian,34.17,108.57;101110200,咸阳,Xianyang,34.20,108.43;101110901,宝鸡,Baoj,34.22,107.09;101110501,渭南,Weinan,34.30,109.30;101111001,铜川,Tongchuan,35.06,109.07;101110601,商洛,Shangluo,0,0;101110300,延安,Yanan,36.35,109.28;101110801,汉中,Hanzhong,33.04,107.01;101110701,安康,Ankang,32.41,109.01;101110401,榆林,Yulin,38.18,109.47;101160101,兰州,Lanzhou,36.04,103.51;101160601,金昌,Jinchang,38.28,102.10;101161301,白银,Baiying,36.33,104.12;101160901,天水,Tianshu,34.37,105.42;101160501,武威,Wuwe,37.56,102.39;101160701,张掖,Zhangye,38.56,100.26;101160801,酒泉,Jiuquan,39.44,98.31;101160301,平凉,Pingliang,35.32,106.40;101160401,庆阳,Qingyang,0,0;101160201,定西,Dingx,0,0;101161101,临夏,Linxia,35.37,103.12;101161401,嘉峪关,Jiayuguan,39.48,98.14;101150101,西宁,Xining,36.38,101.48;101150702,格尔木,Geermu,36.26,94.55;101150601,玉树,Yushu,0,0;101170101,银川,Yinchuan,38.27,106.16;101170201,石嘴山,Shizuishan,39.02,106.22;101170401,固原,Guyuan,0,0;101170301,吴忠,Wuzhong,37.59,106.11;101170501,中卫,Zhongwe,0,0;101130101,乌鲁木齐,Wulumuq,43.45,87.36;101130201,克拉玛依,Karamay,45.36,84.51;101130501,吐鲁番,Turpan,42.54,89.11;101131201,哈密,Ham,42.50,93.28;101131301,和田,Hotan,37.09,79.55;101130801,阿克苏,Aksu,41.09,80.19;101130901,喀什,Kash,39.30,75.59;101130601,库尔勒,Kuerle,41.46,86.07;101130401,昌吉,Changj,44.02,87.18;101131601,博乐,Bole,44.57,82.08;101131101,塔城,Tacheng,46.46,82.59;101131401,阿勒泰,Altay,47.50,88.12;101130301,石河子,Shihez,44.18,86.00;101131001,伊宁,Yining,43.55,81.20;101131011,奎屯,Kuitun,44.27,84.56;101131501,阿图什,Artux,39.42,76.08;101131502,乌恰,Wuqia,0,0;101131503,阿克陶,Aketao,0,0;101131504,阿合奇,Aheq,0,0;101340101,台北,Taipe,25.03,121.30;101340201,高雄,Kaohsiung,0,0;101340401,台中,Taichung,0,0;101340203,台南,Tainan,0,0;101340204,台东,Taitung,0,0;TWXX0003,基隆,Chilung,0,0;101340405,花莲,Hualien,0,0;101340103,新竹,Hsinchu,0,0;101340202,嘉义,Chiay,0,0";
	private ArrayList<LocationPoint> all = new ArrayList<LocationPoint>(); 
	public static Location getInstance(){
		if (instance == null){
			instance = new Location();
			instance.init();
		}
		return instance;
	}
	
	
	private void init(){
		String [] list = cityData.split(";");
		for(int i = 0; i < list.length; i++){
			String item = list[i];
			try {
				String[] pros = item.split(",");
				LocationPoint lp = new LocationPoint();
				lp.setCityCode(pros[0]);
				lp.setName(pros[1]);
				lp.setEnName(pros[2]);
				lp.setLat(Double.parseDouble(pros[3].trim()));
				lp.setLng(Double.parseDouble(pros[4].trim()));
				all.add(lp);
			} catch (Exception e) {
			}
		}
	}
	
	
	public String getCityCodeByLngAndLat(Double lng, Double lat){
		LocationPoint lp = null;
		long minDistance = 0;
		for(int i = 0; i < all.size(); i++){
			LocationPoint cur = all.get(i);
			long distance = Util.getDistance(lng, lat, cur.getLng(), cur.getLat());
			if (minDistance == 0 || distance < minDistance) {
				lp = cur;
				minDistance = distance; 
			}	
		}
		return (lp == null) ? null :lp.getCityCode();
	}
	
	public static void main(String[] args) {
		Location loc = Location.getInstance();
		
		System.out.print(loc.getCityCodeByLngAndLat(117.35,38.94));
	}
	
	
}
